{"version":3,"sources":["webpack:///./src/views/task/todo/todoDetail.vue?e47c","webpack:///./src/views/task/log/index.vue?b150","webpack:///./src/views/task/log/index.vue?7160","webpack:///src/views/task/log/index.vue","webpack:///./src/views/task/log/index.vue?be72","webpack:///./src/views/task/log/index.vue","webpack:///./src/views/task/todo/todoDetail.vue?6a23","webpack:///src/views/task/todo/todoDetail.vue","webpack:///./src/views/task/todo/todoDetail.vue?5044","webpack:///./src/views/task/todo/todoDetail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","slot","_v","model","value","callback","$$v","logtext","expression","on","addChangeLog","directives","name","rawName","_l","log","index","key","logId","logType","formatDate","logDate","_s","logPerson","loading","logList","length","_e","staticRenderFns","computed","taskId","$route","query","data","watch","handler","getChangeLogs","methods","created","component","$event","changeStatus","ref","components","TaskDetail","Log"],"mappings":"kHAAA,W,6DCAA,W,kCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWC,YAAY,CAAC,QAAU,KAAKC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACL,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIU,GAAG,QAAQN,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,WAAW,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,QAAQ,YAAc,wBAAwBG,MAAM,CAACC,MAAOZ,EAAW,QAAEa,SAAS,SAAUC,GAAMd,EAAIe,QAAQD,GAAKE,WAAW,aAAaZ,EAAG,YAAY,CAACE,YAAY,iBAAiBE,MAAM,CAAC,KAAO,UAAU,KAAO,SAASS,GAAG,CAAC,MAAQjB,EAAIkB,eAAe,CAAClB,EAAIU,GAAG,SAAS,KAAKN,EAAG,MAAM,CAACA,EAAG,cAAc,CAACe,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYT,MAAOZ,EAAW,QAAEgB,WAAW,YAAYR,MAAM,CAAC,SAAU,IAAOR,EAAIsB,GAAItB,EAAW,SAAE,SAASuB,EAAIC,GAAO,OAAOpB,EAAG,mBAAmB,CAACqB,IAAIF,EAAIG,MAAMpB,YAAY,WAAWE,MAAM,CAAC,KAAOR,EAAI2B,QAAQH,GAAO,UAAY,MAAM,UAAYxB,EAAI4B,WAAWL,EAAIM,WAAW,CAACzB,EAAG,IAAI,CAACE,YAAY,iBAAiB,CAACF,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACN,EAAIU,GAAGV,EAAI8B,GAAGP,EAAIQ,WAAW,OAAO/B,EAAIU,GAAGV,EAAI8B,GAAGP,EAAIR,iBAAgB,GAAKf,EAAIgC,SAAkC,IAAvBhC,EAAIiC,QAAQC,OAAoDlC,EAAImC,KAA1C/B,EAAG,IAAI,CAACJ,EAAIU,GAAG,wBAAiC,MACttC0B,EAAkB,G,gDCwCtB,GACEC,SAAU,CACRC,OADJ,WAEM,OAAOrC,KAAKsC,OAAOC,MAAMF,SAG7BG,KANF,WAOI,MAAO,CACL1B,QAAS,GACTkB,QAAS,GACTD,SAAN,IAGEU,MAAF,CACI,eAAJ,CACMC,QADN,WAEQ1C,KAAK2C,mBAIXC,QAAS,CACPjB,WAAJ,OACI,aAFJ,WAEA,uKACA,GACA,gBACA,mBAHA,SAKA,kBALA,UAKA,EALA,OAMA,aANA,uBAOA,yBAPA,0BAUA,aACA,kBAXA,8CAaI,cAfJ,WAeA,uKACA,aACA,GACA,iBAHA,SAKA,kBALA,UAKA,EALA,OAMA,aACA,aAPA,uBAQA,2BARA,0BAWA,iBAXA,+CAaID,QA5BJ,SA4BA,GACM,IAAN,kDACA,MACM,OAAN,OAGEmB,QAtDF,WAuDI7C,KAAK2C,kBChGuY,I,wBCQ5YG,EAAY,eACd,EACAhD,EACAqC,GACA,EACA,KACA,WACA,MAIa,OAAAW,E,kDCnBf,IAAIhD,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACA,EAAG,MAAM,CAACE,YAAY,WAAWE,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACL,EAAG,OAAO,CAACJ,EAAIU,GAAG,UAAUN,EAAG,MAAM,CAACG,YAAY,CAAC,MAAQ,UAAU,CAACH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,SAAS,KAAO,SAASS,GAAG,CAAC,MAAQ,SAAS+B,GAAQ,OAAOhD,EAAIiD,aAAa,QAAQ,CAACjD,EAAIU,GAAG,QAAQN,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,UAAU,KAAO,SAASS,GAAG,CAAC,MAAQ,SAAS+B,GAAQ,OAAOhD,EAAIiD,aAAa,MAAM,CAACjD,EAAIU,GAAG,SAAS,KAAKN,EAAG,aAAa,CAAC8C,IAAI,gBAAgB,GAAG9C,EAAG,QAAQ,IACnkBgC,EAAkB,G,4DC4BtB,GACEe,WAAY,CACVC,WAAJ,aACIC,IAAJ,QAEER,QAAS,CACP,aADJ,SACA,4KACA,qBACA,wCAFA,SAGA,kBAHA,UAGA,EAHA,OAIA,YAJA,uBAKA,uBALA,0BAQA,yBACA,gBACA,cAVA,iDCnCqZ,I,wBCQjZE,EAAY,eACd,EACAhD,EACAqC,GACA,EACA,KACA,WACA,MAIa,aAAAW,E","file":"js/chunk-a2ae91a6.e57a55c6.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./todoDetail.vue?vue&type=style&index=0&id=4d82cc78&lang=less&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7c096c23&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"log\"},[_c('div',{staticClass:\"clearfix\",staticStyle:{\"padding\":\"0\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"动态\")]),_c('div',{staticClass:\"add-log\"},[_c('el-input',{staticClass:\"add-log-input\",attrs:{\"size\":\"small\",\"placeholder\":\"给此条任务添加备注，进度记录，信息变更等\"},model:{value:(_vm.logtext),callback:function ($$v) {_vm.logtext=$$v},expression:\"logtext\"}}),_c('el-button',{staticClass:\"add-log-button\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addChangeLog}},[_vm._v(\"新增\")])],1)]),_c('div',[_c('el-timeline',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"reverse\":true}},_vm._l((_vm.logList),function(log,index){return _c('el-timeline-item',{key:log.logId,staticClass:\"log-item\",attrs:{\"type\":_vm.logType(index),\"placement\":\"top\",\"timestamp\":_vm.formatDate(log.logDate)}},[_c('p',{staticClass:\"log-item-text\"},[_c('span',{staticClass:\"log-item-text-person\"},[_vm._v(_vm._s(log.logPerson)+\":\")]),_vm._v(_vm._s(log.logtext))])])}),1),(!_vm.loading && _vm.logList.length === 0)?_c('p',[_vm._v(\"没有备注或任务跟踪记录,去添加吧!\")]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card class=\"log\">\r\n    <div slot=\"header\" class=\"clearfix\" style=\"padding: 0\">\r\n      <span class=\"title\">动态</span>\r\n      <div class=\"add-log\">\r\n        <el-input\r\n          v-model=\"logtext\"\r\n          class=\"add-log-input\"\r\n          size=\"small\"\r\n          placeholder=\"给此条任务添加备注，进度记录，信息变更等\"\r\n        ></el-input>\r\n        <el-button\r\n          class=\"add-log-button\"\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          @click=\"addChangeLog\"\r\n          >新增</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-timeline  v-loading=\"loading\" :reverse=\"true\">\r\n        <el-timeline-item\r\n          v-for=\"(log,index) in logList\"\r\n          :key=\"log.logId\"\r\n          class=\"log-item\"\r\n          :type=\"logType(index)\"\r\n          placement=\"top\"\r\n          :timestamp=\"formatDate(log.logDate)\"\r\n        > \r\n       \r\n          <p class=\"log-item-text\"><span class=\"log-item-text-person\">{{log.logPerson}}:</span>{{ log.logtext }}</p>\r\n        </el-timeline-item>\r\n      </el-timeline>\r\n      <p v-if=\"!loading && logList.length === 0\">没有备注或任务跟踪记录,去添加吧!</p>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script>\r\nimport { formatDate } from \"../../../utils/formatDate\";\r\nimport { addChangeLog, getChangeLogs } from \"../../../api/tasks\";\r\nexport default {\r\n  computed: {\r\n    taskId() {\r\n      return this.$route.query.taskId;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      logtext: \"\",\r\n      logList: [],\r\n      loading:false,\r\n    };\r\n  },\r\n  watch:{\r\n    '$route.query':{\r\n      handler(){\r\n        this.getChangeLogs()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate,\r\n    async addChangeLog() {\r\n      const data = {\r\n        taskId: this.taskId,\r\n        logtext: this.logtext,\r\n      };\r\n      const res = await addChangeLog(data);\r\n      if(res.code !== 200){\r\n        this.$message.error(\"添加失败\");\r\n        return;\r\n      }\r\n      this.logtext = ''\r\n      this.getChangeLogs()\r\n    },\r\n    async getChangeLogs() {\r\n      this.loading = true\r\n      const params = {\r\n        taskId: this.taskId,\r\n      };\r\n      const res = await getChangeLogs(params);\r\n      this.loading = false\r\n      if (res.code !== 200) {\r\n        this.$message.error(\"获取动态失败\");\r\n        return;\r\n      }\r\n      this.logList = res.data;\r\n    },\r\n    logType(index){\r\n       const types = ['primary','success','warning','danger','info']\r\n       const typeIndex = index % 5\r\n       return types[typeIndex]\r\n    }\r\n  },\r\n  created() {\r\n    this.getChangeLogs();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.log {\r\n  margin: 20px 0;\r\n}\r\n/deep/.el-card__header {\r\n  padding: 0 10px;\r\n  height: 50px;\r\n}\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n.title {\r\n  display: inline-block;\r\n  line-height: 50px;\r\n}\r\n.add-log {\r\n  float: right;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 50px;\r\n  &-input {\r\n    width: 400px;\r\n  }\r\n}\r\n.log-item {\r\n  margin: 10px 0;\r\n  p{\r\n      padding: 10px;\r\n  }\r\n  .log-item-text{\r\n      &-person{\r\n          display: inline-block;\r\n          margin: 0 5px;\r\n          font-weight: bolder;\r\n      }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7c096c23&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7c096c23&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c096c23\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"任务详情\")]),_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeStatus(999)}}},[_vm._v(\"否决\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeStatus(2)}}},[_vm._v(\"通过\")])],1)]),_c('TaskDetail',{ref:\"taskDetail\"})],1),_c('Log')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>任务详情</span>\r\n        <div  style=\"float: right\">\r\n        <el-button\r\n          @click=\"changeStatus(999)\"\r\n          type=\"danger\"\r\n          size=\"small\"\r\n          >否决</el-button\r\n        >\r\n        <el-button\r\n          @click=\"changeStatus(2)\"\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          >通过</el-button\r\n        >\r\n        </div>\r\n      </div>\r\n      <TaskDetail ref=\"taskDetail\" />\r\n    </el-card>\r\n     <Log />\r\n  </div>\r\n</template>\r\n<script>\r\nimport TaskDetail from \"../detail/index\";\r\nimport Log from \"../log/index\"\r\nimport { changTaskStatus } from \"../../../api/tasks\";\r\nexport default {\r\n  components: {\r\n    TaskDetail,\r\n    Log\r\n  },\r\n  methods: {\r\n    async changeStatus(status) {\r\n      const taskDetail = this.$refs.taskDetail\r\n      const data = { status,taskId:taskDetail.taskDetail.taskId};\r\n      const res = await changTaskStatus(data);\r\n      if(res.code != 200){\r\n          this.$message.error('失败')\r\n          return\r\n      }\r\n      this.$message.success('成功')\r\n      this.$router.push({\r\n          path:'/ing'\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./todoDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./todoDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./todoDetail.vue?vue&type=template&id=4d82cc78&scoped=true&\"\nimport script from \"./todoDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./todoDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./todoDetail.vue?vue&type=style&index=0&id=4d82cc78&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d82cc78\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}