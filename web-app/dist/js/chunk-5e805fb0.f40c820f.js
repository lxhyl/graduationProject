(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e805fb0"],{"6d7d":function(t,e,a){"use strict";a("fa27")},"9f55":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("Detail")],1),a("Log")],1)},r=[],s=a("a88a"),o=a("2c1e"),i={components:{Detail:o["default"],Log:s["a"]}},l=i,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);e["default"]=u.exports},a88a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"log"},[a("div",{staticClass:"clearfix",staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("动态")]),a("div",{staticClass:"add-log"},[a("el-input",{staticClass:"add-log-input",attrs:{size:"small",placeholder:"给此条任务添加备注，进度记录，信息变更等"},model:{value:t.logtext,callback:function(e){t.logtext=e},expression:"logtext"}}),a("el-button",{staticClass:"add-log-button",attrs:{type:"primary",size:"small"},on:{click:t.addChangeLog}},[t._v("新增")])],1)]),a("div",[a("el-timeline",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{reverse:!0}},t._l(t.logList,(function(e,n){return a("el-timeline-item",{key:e.logId,staticClass:"log-item",attrs:{type:t.logType(n),placement:"top",timestamp:t.formatDate(e.logDate)}},[a("p",{staticClass:"log-item-text"},[a("span",{staticClass:"log-item-text-person"},[t._v(t._s(e.logPerson)+":")]),t._v(t._s(e.logtext))])])})),1),t.loading||0!==t.logList.length?t._e():a("p",[t._v("没有备注或任务跟踪记录,去添加吧!")])],1)])},r=[],s=(a("96cf"),a("1da1")),o=a("2095"),i=a("ea7f"),l={computed:{taskId:function(){return this.$route.query.taskId}},data:function(){return{logtext:"",logList:[],loading:!1}},watch:{"$route.query":{handler:function(){this.getChangeLogs()}}},methods:{formatDate:o["b"],addChangeLog:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={taskId:t.taskId,logtext:t.logtext},e.next=3,Object(i["a"])(a);case 3:if(n=e.sent,200===n.code){e.next=7;break}return t.$message.error("添加失败"),e.abrupt("return");case 7:t.logtext="",t.getChangeLogs();case 9:case"end":return e.stop()}}),e)})))()},getChangeLogs:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={taskId:t.taskId},e.next=4,Object(i["g"])(a);case 4:if(n=e.sent,t.loading=!1,200===n.code){e.next=9;break}return t.$message.error("获取动态失败"),e.abrupt("return");case 9:t.logList=n.data;case 10:case"end":return e.stop()}}),e)})))()},logType:function(t){var e=["primary","success","warning","danger","info"],a=t%5;return e[a]}},created:function(){this.getChangeLogs()}},c=l,u=(a("6d7d"),a("2877")),g=Object(u["a"])(c,n,r,!1,null,"7c096c23",null);e["a"]=g.exports},fa27:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5e805fb0.f40c820f.js.map